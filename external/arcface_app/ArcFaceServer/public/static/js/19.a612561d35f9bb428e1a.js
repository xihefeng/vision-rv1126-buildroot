webpackJsonp([19],{"S/5T":function(e,t){},"th+7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("PJh5"),i=a.n(s),r={name:"accessSettings",data:function(){return{submitLoading:!1,restoreLoading:!1,resetConfirm:!1,reseting:!1,config:{rules:[{type:"object"},{validator:this.timeValidator}]},timeDisabled:!1,ip:"",mac:"",cpuserial:"",ArcFaceGoversion:"",ArcFaceServerversion:""}},computed:{CPULabel:function(){return this.$t("basicSettings.CPULabel")},connectState:function(){return this.$t("accessSettings.connectState")},deviceNameLabel:function(){return this.$t("accessSettings.deviceName")},requireMessage:function(){return this.$t("accessSettings.required")},deviceNamePlaceholder:function(){return this.$t("accessSettings.deviceNamePlaceholder")},restartLabel:function(){return this.$t("accessSettings.restartLabel")},timePlaceholder:function(){return this.$t("accessSettings.timePlaceholder")},delayLabel:function(){return this.$t("accessSettings.delayLabel")},restoreLabel:function(){return this.$t("accessSettings.restoreLabel")},versionLabel:function(){return this.$t("accessSettings.versionLabel")},remindTitle:function(){return this.$t("accessSettings.remind")}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"accessSettings"})},mounted:function(){this.getdefaultMsg(),this.getVersion()},methods:{getdefaultMsg:function(){var e=this;this.$axios.get("getDeviceInfo").then(function(t){0===t.data.retCode&&(e.form.setFieldsValue({deviceName:t.data.info.deviceName,reboot:!!t.data.info.reboot,rebootTime:i()(t.data.info.rebootTime,"HH:mm:ss"),closeDoorInterval:t.data.info.closeDoorInterval}),e.ip=t.data.info.ip,e.mac=t.data.info.mac,e.cpuserial=t.data.info.cpuserial)})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){t.submitLoading=!0;var s=new FormData;s.append("deviceName",a.deviceName.trim()),s.append("reboot",a.reboot?1:0),s.append("rebootTime",i()(a.rebootTime).format("HH:mm:ss")),s.append("closeDoorInterval",a.closeDoorInterval),t.$axios.post("setDeviceInfo",s).then(function(e){t.submitLoading=!1,0===e.data.retCode?(t.$message.destroy(),t.$message.success(t.$t("accessSettings.settingOk"))):(t.$message.destroy(),t.$message.error(e.data.retMsg))})}})},timeValidator:function(e,t,a){this.timeDisabled?a():null==t?a(this.$t("accessSettings.required")):a()},showResetConfirm:function(){this.resetConfirm=!0},handleResetOk:function(){var e=this;this.resetConfirm=!1,this.reseting=!0;var t=this;this.$axios.get("resetSoftware","",{timeout:3e4}).then(function(a){if("timeout"===a.data.retMsg&&(t.reseting=!1),0===a.data.retCode)var s=setInterval(function(){e.$axios.get("checkAdmin").then(function(a){clearInterval(s),t.reseting=!1,setTimeout(function(){e.$router.push("/login")},2e3)})},1e3)})},handleResetCancel:function(){this.resetConfirm=!1},getVersion:function(){var e=this;this.$axios.get("getVersion").then(function(t){0===t.data.retCode&&(e.ArcFaceGoversion=t.data.info.ArcFaceGoVersion,e.ArcFaceServerversion=t.data.info.ArcFaceServerVersion)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{staticClass:"access-settings",attrs:{labelAlign:"left",form:e.form,hideRequiredMark:!0},on:{submit:e.handleSubmit}},[a("a-form-item",{staticClass:"linkStatus bottom24",attrs:{label:e.connectState}},[a("span",{staticClass:"ant-form-text"},[e._v("\n        "+e._s(e.$t("accessSettings.standAlone"))+"\n      ")])]),e._v(" "),a("a-form-item",{staticClass:"toRight bottom24",attrs:{label:e.deviceNameLabel}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deviceName",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur"}],expression:"[\n          'deviceName',\n          {\n            rules: [\n              {\n                required: true,\n                message: requireMessage,\n              },\n            ],\n            validateTrigger: 'blur',\n          },\n        ]"}],attrs:{placeholder:e.deviceNamePlaceholder,maxLength:15}})],1),e._v(" "),a("a-form-item",{staticClass:"restart toRight bottom24",attrs:{label:e.restartLabel}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["reboot",{valuePropName:"checked"}],expression:"[\n          'reboot',\n          {\n            valuePropName: 'checked',\n          },\n        ]"}],staticClass:"switch"})],1),e._v(" "),a("a-form-item",{staticClass:"time toRight"},[a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["rebootTime",e.config],expression:"['rebootTime', config]"}],staticClass:"time-picker",attrs:{disabled:e.timeDisabled,placeholder:e.timePlaceholder}})],1),e._v(" "),a("a-form-item",{staticClass:"toRight bottom24",attrs:{label:e.delayLabel}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["closeDoorInterval",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur"}],expression:"[\n          'closeDoorInterval',\n          {\n            rules: [\n              {\n                required: true,\n                message: requireMessage,\n              },\n            ],\n            validateTrigger: 'blur',\n          },\n        ]"}],staticClass:"after-suffix",attrs:{min:2,max:100,precision:2}})],1),e._v(" "),a("a-form-item",{staticClass:"IP bottom24",attrs:{label:"IP"}},[a("span",{staticClass:"ant-form-text"},[e._v("\n        "+e._s(e.ip)+"\n      ")])]),e._v(" "),a("a-form-item",{staticClass:"MAC bottom24",attrs:{label:"MAC"}},[a("span",{staticClass:"ant-form-text"},[e._v("\n        "+e._s(e.mac)+"\n      ")])]),e._v(" "),a("a-form-item",{staticClass:"SN bottom24",attrs:{label:e.CPULabel}},[a("span",{staticClass:"ant-form-text"},[e._v("\n        "+e._s(e.cpuserial)+"\n      ")])]),e._v(" "),a("a-form-item",{staticClass:"restore bottom24",attrs:{label:e.restoreLabel}},[a("a-button",{staticClass:"restoreBtn",attrs:{type:"primary",loading:e.restoreLoading},on:{click:e.showResetConfirm}},[e._v("\n        "+e._s(e.restoreLabel)+"\n      ")])],1),e._v(" "),a("a-form-item",{staticClass:"version bottom24",attrs:{label:e.versionLabel}},[a("span",{staticClass:"ant-form-text version-item"},[e._v("\n        ArcFaceGo： "+e._s(e.ArcFaceGoversion)+"\n      ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"ant-form-text version-item"},[e._v("\n        ArcFaceServer： "+e._s(e.ArcFaceServerversion)+"\n      ")])]),e._v(" "),a("a-form-item",{staticClass:"top64",staticStyle:{"margin-top":"36px"},attrs:{label:" ",colon:!1}},[a("a-button",{staticClass:"btn",staticStyle:{"margin-bottom":"130px"},attrs:{type:"primary","html-type":"submit",loading:e.submitLoading}},[e._v("\n        "+e._s(e.$t("accessSettings.save"))+"\n      ")])],1)],1),e._v(" "),a("a-modal",{attrs:{title:e.remindTitle,visible:e.resetConfirm,centered:!0,closable:!1,width:290}},[a("template",{slot:"footer"},[a("a-button",{key:"submit",staticClass:"modal-submit",attrs:{"html-type":"submit",type:"primary"},on:{click:e.handleResetOk}},[e._v("\n        "+e._s(e.$t("accessSettings.confirm"))+"\n      ")]),e._v(" "),a("a-button",{key:"back",staticClass:"modal-cancel",on:{click:e.handleResetCancel}},[e._v("\n        "+e._s(e.$t("accessSettings.cancel"))+"\n      ")])],1),e._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"iconfont iconziyuan13"}),e._v(" "),a("p",[e._v(e._s(e.$t("accessSettings.ifRestore")))])])],2),e._v(" "),a("a-modal",{attrs:{title:e.remindTitle,visible:e.reseting,centered:!0,closable:!1,width:290,footer:null}},[a("div",{staticClass:"content"},[a("p",[e._v(e._s(e.$t("accessSettings.restoring")))])])])],1)},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(e){a("S/5T")},"data-v-25b75d2c",null);t.default=o.exports}});