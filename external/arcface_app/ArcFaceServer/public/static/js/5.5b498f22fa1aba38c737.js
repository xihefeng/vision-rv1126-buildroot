webpackJsonp([5],{"Bc+3":function(e,t){},FCpv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"topSearch",data:function(){return{current:"",downIcon:(0,this.$createElement)("span",{class:"iconfont iconziyuan4"}),searchData:{searchTime:[],allowVal:null,query:"",temperatureState:0}}},computed:{timePlaceholder:function(){return[this.$t("recognize.startTime"),this.$t("recognize.endTime")]},searchPlaceholder:function(){return this.$t("recognize.searchPlaceholder")}},components:{TopBar:a("VIxT").a},methods:{getCurrentStyle:function(e,t){var a={};return 1===e.date()&&(a.border="1px solid #1890ff",a.borderRadius="50%"),a},handleTimeChange:function(e,t){this.searchData.searchTime=t,this.search()},handleAllowChange:function(e){this.searchData.allowVal=e,this.search()},handleTemperatureChange:function(e){this.searchData.temperatureState=e||0,this.search()},search:function(){this.$emit("search",this.searchData)},enterSearch:function(){this.search(),this.$refs.inputSearch.blur()},refresh:function(){this.search()},exportData:function(){this.$emit("exportData",this.searchData)},clearInput:function(){this.searchData.query="",this.search()}},mounted:function(){this.current=new Date}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("top-bar",[a("div",{staticClass:"top-content",attrs:{slot:"top-content"},slot:"top-content"},[a("div",{staticClass:"facetime"},[a("span",{staticClass:"time"},[e._v(e._s(e.$t("recognize.time")))]),e._v(" "),a("div",{staticClass:"date"},[a("a-range-picker",{attrs:{allowClear:!0,placeholder:e.timePlaceholder},on:{change:e.handleTimeChange}})],1),e._v(" "),a("span",{staticClass:"iconfont iconziyuan3"})]),e._v(" "),a("div",{staticClass:"allow"},[a("span",{staticClass:"go"},[e._v(e._s(e.$t("recognize.allow")))]),e._v(" "),a("a-select",{staticClass:"select",staticStyle:{width:"144px"},attrs:{allowClear:!0,"default-value":"",suffixIcon:e.downIcon},on:{change:e.handleAllowChange}},[a("a-select-option",{attrs:{value:"1"}},[e._v("\n          "+e._s(e.$t("recognize.go"))+"\n        ")]),e._v(" "),a("a-select-option",{attrs:{value:"3"}},[e._v("\n          "+e._s(e.$t("recognize.noPermission"))+"\n        ")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("\n          "+e._s(e.$t("recognize.forbid"))+"\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"temperature"},[a("span",{staticClass:"temp"},[e._v(e._s(e.$t("recognize.temp")))]),e._v(" "),a("a-select",{staticClass:"select",staticStyle:{width:"144px"},attrs:{allowClear:!0,suffixIcon:e.downIcon},on:{change:e.handleTemperatureChange}},[a("a-select-option",{attrs:{value:"1"}},[e._v("\n          "+e._s(e.$t("recognize.tempNormal"))+"\n        ")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("\n          "+e._s(e.$t("recognize.tempAbnormal"))+"\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"input"},[a("a-input",{ref:"inputSearch",attrs:{placeholder:e.searchPlaceholder},on:{blur:e.search,keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.enterSearch(t):null}},model:{value:e.searchData.query,callback:function(t){e.$set(e.searchData,"query",t)},expression:"searchData.query"}}),e._v(" "),a("span",{staticClass:"iconfont iconsousuo"}),e._v(" "),a("span",{staticClass:"clear iconfont iconcuowu-yuan-tianchong",on:{click:e.clearInput}})],1),e._v(" "),a("div",{staticClass:"refresh",on:{click:e.refresh}},[a("span",{staticClass:"iconfont iconziyuan5"}),e._v(" "),a("span",[e._v(e._s(e.$t("recognize.refresh")))])]),e._v(" "),a("div",{staticClass:"export",on:{click:e.exportData}},[a("span",{staticClass:"iconfont icondaochu"}),e._v(" "),a("span",[e._v(e._s(e.$t("recognize.export")))])])])])},staticRenderFns:[]};var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-bar"},[a("div",{staticClass:"record"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("recognize.recordPhoto")))]),e._v(" "),a("div",{staticClass:"record-img"},[e.recordLoading?a("a-spin"):e._e(),e._v(" "),e.recordNoData?a("span",{staticClass:"no-photo"},[e._v("NO PHOTO")]):e._e(),e._v(" "),e.recordImg?a("img",{attrs:{src:e.recordImg,alt:""}}):e._e()],1)]),e._v(" "),a("div",{staticClass:"recognize"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("recognize.recognizePhoto")))]),e._v(" "),a("div",{staticClass:"recognize-img"},[e.recognizeImg?a("img",{attrs:{src:e.recognizeImg,alt:""}}):e._e(),e._v(" "),e.recordNoData||e.recognizeNoData?a("span",{staticClass:"no-photo"},[e._v("NO PHOTO")]):e._e(),e._v(" "),e.recognizeLoading&&!e.recordNoData?a("a-spin"):e._e()],1)])])},staticRenderFns:[]};var i={name:"recognize",data:function(){return{searchData:{page:1,pageCount:24,date_interval:[],pass:null,search:"",temperatureState:0},recognizeList:[],total:0,recordImg:null,recognizeImg:null,recordLoading:!1,recordNoData:!0,recognizeLoading:!1,recognizeNoData:!0,firstRecord:{}}},computed:{columns:function(){var e=this;return[{title:this.$t("recognize.index"),customRender:function(t,a,n){return""+(n+1+24*(e.searchData.page-1))}},{title:this.$t("recognize.IDLabel"),customRender:function(t,a,n){return"-1"===a.pId?e.$t("recognize.unknown"):a.personNumber}},{title:this.$t("recognize.nameLabel"),customRender:function(t,a,n){return"-1"===a.personName?e.$t("recognize.unknown"):a.personName}},{title:this.$t("recognize.createTime"),dataIndex:"createTime",key:"createTime"},{title:this.$t("recognize.allow"),customRender:function(t,a,n){return"1"===a.pass?e.$t("recognize.go"):"2"===a.pass?e.$t("recognize.forbid"):e.$t("recognize.noPermission")}},{title:this.$t("recognize.recordTemp"),customRender:this.temperatureRender},{title:this.$t("recognize.warningTemperature"),dataIndex:"warningTemperature",key:"warningTemperature"}]}},mounted:function(){this.getAllRecord()},methods:{rowKey:function(e,t){return e.createTime+t},temperatureRender:function(e,t,a){var n=this.$createElement;return t.temperature>=t.warningTemperature?n("span",{class:"temp"},[n("span",{class:"iconfont icongaowen"}),t.temperature]):-1===t.temperature?"--":t.temperature},handlePageChange:function(e){this.searchData.page=e,this.getAllRecord()},getAllRecord:function(e){var t=this,a=this,n=this.searchData;e&&(n.date_interval=e.searchTime,n.pass=e.allowVal,n.search=e.query,n.temperatureState=parseInt(e.temperatureState)),this.$axios.patch("getPaginatedRecordInfo",n).then(function(e){0===e.data.retCode&&(a.recognizeList=e.data.info,a.total=e.data.total,t.firstRecord=a.recognizeList[0],t.rowClick(t.firstRecord,0).on.click())})},rowClick:function(e,t){var a=this;return{on:{click:function(){a.clickedRow=t,a.recordNoData=!0,a.recognizeImg=null,a.recordImg=null,a.recognizeNoData=!1,a.recognizeLoading=!0,a.recognizeImg=e.imagePath,a.recognizeImg?a.recognizeLoading=!1:a.recognizeNoData=!0,"-1"!==e.pId&&(a.recordNoData=!1,a.recordLoading=!0,a.$axios.patch("getPersonById",{id:parseInt(e.pId)}).then(function(e){0===e.data.retCode?(a.recordLoading=!1,a.recordImg=e.data.info[0].imagePath):a.recordNoData=!0}))}}}},searchChange:function(e){this.searchData.page=1,this.getAllRecord(e)},exportData:function(e){var t=this.searchData;e&&(t.date_interval=e.searchTime,t.pass=e.allowVal,t.search=e.query,t.temperatureState=parseInt(e.temperatureState)),this.$axios.patch("exportToCSV",t).then(function(e){0===e.data.retCode&&window.open(e.data.info)})}},components:{TopSearch:a("VU/8")(n,r,!1,function(e){a("S0wN")},"data-v-c6240b26",null).exports,LeftBar:a("VU/8")({name:"leftBar",data:function(){return{}},props:["recognizeImg","recordImg","recordLoading","recordNoData","recognizeLoading","recognizeNoData"],methods:{}},o,!1,function(e){a("ryPw")},"data-v-5f24961b",null).exports}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recognize"},[a("top-search",{on:{search:e.searchChange,exportData:e.exportData}}),e._v(" "),a("div",{staticClass:"content"},[a("left-bar",{attrs:{recordImg:e.recordImg,recognizeImg:e.recognizeImg,recordLoading:e.recordLoading,recordNoData:e.recordNoData,recognizeLoading:e.recognizeLoading,recognizeNoData:e.recognizeNoData}}),e._v(" "),a("div",{staticClass:"list-content"},[a("a-table",{attrs:{columns:e.columns,"data-source":e.recognizeList,pagination:!1,tableLayout:"fixed",customRow:e.rowClick,"row-key":e.rowKey,align:"center",rowClassName:function(t,a){var n="light-row";return a%2==1&&(n="dark-row"),a===e.clickedRow&&(n+=" clickedRow"),n}},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{},[e._v(e._s(t))])}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("span",{staticClass:"total"},[e._v(e._s(e.$t("recognize.total"))+" "+e._s(e.total)+" "+e._s(e.$t("recognize.piece")))]),e._v(" "),a("a-pagination",{attrs:{current:e.searchData.page,total:e.total,pageSize:24},on:{change:e.handlePageChange}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,c,!1,function(e){a("Bc+3")},"data-v-1ba42f8c",null);t.default=s.exports},MxJJ:function(e,t){},S0wN:function(e,t){},VIxT:function(e,t,a){"use strict";var n={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"topBar"},[this._t("top-content")],2)},staticRenderFns:[]};var r=a("VU/8")({name:"",data:function(){return{}}},n,!1,function(e){a("MxJJ")},"data-v-01fba590",null);t.a=r.exports},ryPw:function(e,t){}});