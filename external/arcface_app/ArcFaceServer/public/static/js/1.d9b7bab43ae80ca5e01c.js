webpackJsonp([1],{"99jo":function(e,a){},QlWu:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});t("YaEn");var n=t("xrEL"),i=t("lbHh"),r=t.n(i),s={name:"login",data:function(){return{pwdMsg:"",initialUsername:"",initialPwd:""}},computed:{usernameLabel:function(){return this.$t("login.usernameLabel")},requireMessage:function(){return this.$t("login.required")},pwdLabel:function(){return this.$t("login.pwdLabel")}},components:{Background:n.a},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},created:function(){this.initialUsername=r.a.get("username"),this.initialPwd=r.a.get("pwd")},methods:{getLanguage:function(){var e=this;this.$axios.get("getLanguage").then(function(a){if(0===a.data.retCode){var t=a.data.info;e.$i18n.locale="zh_CN"===t.lang?"zh":"en",e.$store.commit("setLanguage",t.lang)}})},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields(function(e,t){if(!e){t.remember?(r.a.set("username",t.accountName,{expires:2147483647}),r.a.set("pwd",t.accountPwd,{expires:2147483647})):(r.a.set("username","",{expires:2147483647}),r.a.set("pwd","",{expires:2147483647}));var n=a;a.$axios.patch("login",{accountName:t.accountName,accountPassword:t.accountPwd}).then(function(e){0===e.data.retCode?(0===e.data.info.menu.length?n.$message.error(a.$t("login.noAuth")):e.data.info.menu[0].submenu.length>0?n.$router.replace(e.data.info.menu[0].submenu[0].path):n.$router.replace(e.data.info.menu[0].name),n.$store.dispatch("setUsername",e.data.info.accountName),n.$store.dispatch("setRolename",e.data.info.roleName),n.$store.dispatch("setAccountId",e.data.info.accountId),n.$store.dispatch("setMenuList",e.data.info.menu)):-1===e.data.retCode&&""!==t.accountPwd&&(n.pwdMsg=a.$t("login.usernameOrPwdWrong"))})}})},handlePasswordChange:function(){this.pwdMsg=""},checkPsd:function(){var e=this;this.$axios.get("checkAdmin").then(function(a){0===a.data.retCode&&e.$router.push("/firstLogin")})}},mounted:function(){this.getLanguage(),this.checkPsd();var e=r.a.get("username"),a=r.a.get("pwd");void 0!==e&&void 0!==a&&(this.initialUsername=e,this.initialPwd=a)}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"login"},[t("background",[t("div",{staticClass:"form",attrs:{slot:"form"},slot:"form"},[t("div",{staticClass:"form-title"},[e._v(e._s(e.$t("login.welcome")))]),e._v(" "),t("a-form",{staticClass:"login-form",class:{en:"en_US"===e.$store.state.language},attrs:{id:"components-form-demo-normal-login",form:e.form,hideRequiredMark:!0,labelAlign:"left"},on:{submit:e.handleSubmit}},[t("a-form-item",{staticClass:"username",attrs:{label:e.usernameLabel}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["accountName",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur",initialValue:e.initialUsername}],expression:"[\n              'accountName',\n              {\n                rules: [{ required: true, message: requireMessage }],\n                validateTrigger: 'blur',\n                initialValue: initialUsername,\n              },\n            ]"}],attrs:{maxLength:30}})],1),e._v(" "),t("a-form-item",{staticClass:"password",class:{help:""!==e.pwdMsg},attrs:{label:e.pwdLabel}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["accountPwd",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur",initialValue:e.initialPwd}],expression:"[\n              'accountPwd',\n              {\n                rules: [{ required: true, message: requireMessage }],\n                validateTrigger: 'blur',\n                initialValue: initialPwd,\n              },\n            ]"}],attrs:{type:"password"},on:{change:e.handlePasswordChange}}),e._v(" "),e.pwdMsg&&""!==e.pwdMsg?t("span",{staticClass:"pwdMsg"},[e._v(e._s(e.pwdMsg))]):e._e()],1),e._v(" "),t("a-form-item",{staticClass:"remember",attrs:{label:" ",colon:!1}},[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["remember",{valuePropName:"checked",initialValue:!!e.initialPwd}],expression:"[\n              'remember',\n              {\n                valuePropName: 'checked',\n                initialValue: initialPwd ? true : false,\n              },\n            ]"}]},[e._v("\n            "+e._s(this.$t("login.remember"))+"\n          ")])],1),e._v(" "),t("a-button",{staticClass:"login-form-button",attrs:{type:"primary","html-type":"submit"}},[e._v("\n          "+e._s(this.$t("login.login"))+"\n        ")])],1)],1)])],1)},staticRenderFns:[]};var u=t("VU/8")(s,o,!1,function(e){t("99jo")},"data-v-7f48272c",null);a.default=u.exports},x7Vi:function(e,a){},xrEL:function(e,a,t){"use strict";var n={render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"background"},[a("div",{staticClass:"title"},[this._v("\n    ArcFaceGo "+this._s(this.$t("login.ArcFaceGo"))+"\n  ")]),this._v(" "),this._t("form")],2)},staticRenderFns:[]};var i=t("VU/8")({name:"background",data:function(){return{}}},n,!1,function(e){t("x7Vi")},"data-v-af1e2800",null);a.a=i.exports}});