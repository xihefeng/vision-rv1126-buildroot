webpackJsonp([16],{"3yTf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"warmthSettings",data:function(){return{methodsDisabled:!0,interDisabled:!1,submitLoading:!1,Disabled:!1,stranger:!1,common:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this,{name:"warmthSettings",onValuesChange:function(t,a){a.hasOwnProperty("strangertemperature")&&(e.methodsDisabled=!a.strangertemperature),a.hasOwnProperty("repeatedtemperature")&&(e.interDisabled=!a.repeatedtemperature),a.hasOwnProperty("switchOpen")&&(e.Disabled=!a.switchOpen)}})},computed:{switchOpenLabel:function(){return this.$t("warmthSettings.switchOpenLabel")},warningTempLabel:function(){return this.$t("warmthSettings.warningTempLabel")},requireMessage:function(){return this.$t("warmthSettings.required")},voicebroadcastLabel:function(){return this.$t("warmthSettings.voicebroadcastLabel")},strangertemperatureLabel:function(){return this.$t("warmthSettings.strangertemperatureLabel")},repeatedtemperatureLabel:function(){return this.$t("warmthSettings.repeatedtemperatureLabel")},intervallengthLabel:function(){return this.$t("warmthSettings.intervallengthLabel")},acceptsdelayLabel:function(){return this.$t("warmthSettings.acceptsdelayLabel")}},created:function(){this.getdefaultMsg()},methods:{handleSubmit:function(){var e=this;this.form.validateFields(function(t,a){if(!t){var r=new FormData,s=!0===a.switchOpen?1:0,n=!0===a.voicebroadcastopen?1:0,i=!0===a.strangertemperature?1:0,o=!0===a.repeatedtemperature?1:0;r.append("enable",s),r.append("warningTemperature",a.warningTemp),r.append("mode",i),r.append("voiceMode",n),r.append("retry",o),r.append("repeatInterval",a.interval),r.append("delay",a.delay);a.switchOpen,a.voicebroadcastopen,a.strangertemperature,a.warningTemp,a.repeatedtemperature,a.interval,a.delay;e.$axios.post("setTemperatureInfo",r).then(function(t){0===t.data.retCode?(e.$message.destroy(),e.$message.success(e.$t("warmthSettings.settingOk")),e.getdefaultMsg()):(e.$message.destroy(),e.$message.error(t.data.retMsg))})}})},getdefaultMsg:function(){var e=this,t=this;this.$axios.get("getTemperatureInfo").then(function(a){0===a.data.retCode&&(e.stranger=1===a.data.info.mode,t.form.setFieldsValue({switchOpen:1===a.data.info.enable,voicebroadcastopen:1===a.data.info.voiceMode,warningTemp:a.data.info.warningTemperature,strangertemperature:1===a.data.info.mode,repeatedtemperature:1===a.data.info.retry,interval:a.data.info.repeatInterval,delay:a.data.info.delay}),1===a.data.info.enable&&1===a.data.info.mode?e.common=1:e.common=0,localStorage.setItem("common",e.common),console.log(123456),console.log(e.common))})},limit:function(e){var t=/^(\-)*(\d+)\.(\d).*$/;return"string"==typeof e?isNaN(Number(e))?"":e.replace(t,"$1$2.$3"):"number"==typeof e?isNaN(e)?"":String(e).replace(t,"$1$2.$3"):""}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{staticClass:"warmthSettings",attrs:{labelAlign:"left",form:e.form,hideRequiredMark:!0,labelCol:{span:10},wrapperCol:{span:25}},on:{submit:e.handleSubmit}},[a("a-form-item",{staticClass:"bottom24",attrs:{label:e.switchOpenLabel}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["switchOpen",{valuePropName:"checked"}],expression:"[\n          'switchOpen',\n          {\n            valuePropName: 'checked',\n          },\n        ]"}],staticClass:"switch"})],1),e._v(" "),a("a-form-item",{staticClass:"bottom24",attrs:{label:e.voicebroadcastLabel}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["voicebroadcastopen",{valuePropName:"checked"}],expression:"[\n          'voicebroadcastopen',\n          {\n            valuePropName: 'checked',\n          },\n        ]"}],staticClass:"switch",attrs:{disabled:e.Disabled}})],1),e._v(" "),a("a-form-item",{staticClass:"toRight bottom24",attrs:{label:e.warningTempLabel}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["warningTemp",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur"}],expression:"[\n          'warningTemp',\n          {\n            rules: [\n              {\n                required: true,\n                message: requireMessage,\n              },\n            ],\n            validateTrigger: 'blur',\n          },\n        ]"}],attrs:{disabled:e.Disabled,min:30,max:40,parser:e.limit}}),e._v(" "),a("span",{staticClass:"after-suffix"},[e._v(e._s(e.$t("warmthSettings.suffix")))])],1),e._v(" "),a("a-form-item",{staticClass:"toRight bottom24",attrs:{label:e.acceptsdelayLabel}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["delay",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur"}],expression:"[\n          'delay',\n          {\n            rules: [\n              {\n                required: true,\n                message: requireMessage,\n              },\n            ],\n            validateTrigger: 'blur',\n          },\n        ]"}],attrs:{disabled:e.Disabled,precision:0,min:0,max:9999,parser:e.limit}}),e._v(" "),a("span",{staticClass:"after"},[e._v(e._s(e.$t("warmthSettings.mintime")))])],1),e._v(" "),a("a-form-item",{staticClass:"strag",attrs:{label:e.strangertemperatureLabel}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["strangertemperature",{valuePropName:"checked"}],expression:"[\n          'strangertemperature',\n          {\n            valuePropName: 'checked',\n          },\n        ]"}],staticClass:"switch",attrs:{disabled:e.Disabled}}),e._v(" "),a("p",{staticClass:"txt"},[e._v("\n        "+e._s(e.$t("warmthSettings.txt"))+"\n      ")])],1),e._v(" "),a("a-form-item",{staticClass:"bottom24",attrs:{label:e.repeatedtemperatureLabel}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["repeatedtemperature",{valuePropName:"checked"}],expression:"[\n          'repeatedtemperature',\n          {\n            valuePropName: 'checked',\n          },\n        ]"}],staticClass:"switch",attrs:{disabled:0!=e.Disabled||0!=e.methodsDisabled}})],1),e._v(" "),a("a-form-item",{staticClass:"toRight bottom24",attrs:{label:e.intervallengthLabel}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["interval",{rules:[{required:!0,message:e.requireMessage}],validateTrigger:"blur"}],expression:"[\n          'interval',\n          {\n            rules: [\n              {\n                required: true,\n                message: requireMessage,\n              },\n            ],\n            validateTrigger: 'blur',\n          },\n        ]"}],attrs:{min:2,max:8,parser:e.limit,disabled:0!=e.Disabled||0!=e.methodsDisabled||0!=e.interDisabled,precision:1}}),e._v(" "),a("span",{staticClass:"after"},[e._v(e._s(e.$t("warmthSettings.time")))])],1),e._v(" "),a("a-form-item",{staticClass:"top64",attrs:{label:" ",colon:!1}},[a("a-button",{staticClass:"btn",attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("\n        "+e._s(e.$t("warmthSettings.save"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,s,!1,function(e){a("xKS2")},"data-v-99c131da",null);t.default=n.exports},xKS2:function(e,t){}});